import{b as d}from"./init-cbacef14.js";console.log("Script started successfully");let r;WA.onInit().then(()=>{console.log("Scripting API ready"),console.log("Player tags: ",WA.player.tags),WA.room.onEnterLayer("clockZone").subscribe(()=>{const o=new Date,t=o.getHours()+":"+o.getMinutes();r=WA.ui.openPopup("clockPopup","It's "+t,[])}),WA.room.onEnterLayer("tv_zone").subscribe(()=>{WA.room.showLayer("tv-on")}),WA.room.onLeaveLayer("tv_zone").subscribe(()=>{WA.room.hideLayer("tv-on")}),WA.room.onEnterLayer("floor").subscribe(()=>{WA.room.hideLayer("roof"),WA.room.hideLayer("walls-bg-front"),WA.room.hideLayer("sign")}),WA.room.onLeaveLayer("floor").subscribe(()=>{WA.room.showLayer("roof"),WA.room.showLayer("walls-bg-front"),WA.room.showLayer("facade-furniture-bg"),WA.room.showLayer("sign")}),WA.room.onEnterLayer("rooms_floor").subscribe(()=>{WA.room.hideLayer("facade-furniture-fg"),WA.room.hideLayer("facade"),WA.room.hideLayer("facade-furniture-bg")}),WA.room.onLeaveLayer("rooms_floor").subscribe(()=>{WA.room.showLayer("facade-furniture-fg"),WA.room.showLayer("facade"),WA.room.showLayer("facade-furniture-bg")}),WA.room.onLeaveLayer("clockZone").subscribe(A),d().then(()=>{console.log("Scripting API Extra ready")}).catch(o=>console.error(o))}).catch(o=>console.error(o));function A(){r!==void 0&&(r.close(),r=void 0)}async function c(o){const t="https://apps.taskmagic.com/api/v1/webhooks/PfnacAedJc8ztlw8QfHax",{uuid:s,name:n}=WA.player;if(!s||!n){console.error("Invalid player data");return}const i=WA.room.id,l=Date.now(),u={id:s,name:n,roomId:i,firstPing:o,timestamp:l},m=(e,a,y=5e3)=>Promise.race([fetch(e,a),new Promise((W,f)=>setTimeout(()=>f(new Error("Request timed out")),y))]);try{const e=await m(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const a=await e.json();console.log("Success:",a)}catch(e){console.error("Error:",e)}}WA.onInit().then(()=>{if(WA.player.tags.includes("bot"))return;let o=!0;c(o),o=!1,setInterval(()=>{c(o)},3e5)});
