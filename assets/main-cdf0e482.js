import{b as A,d as u,l as a}from"./init-9118a5f4.js";console.log("Script started successfully");let r,m="https://admin.workadventu.re";WA.onInit().then(()=>{console.log("Scripting API ready"),console.log("Player tags: ",WA.player.tags),WA.room.onEnterLayer("clockZone").subscribe(()=>{const e=new Date,o=e.getHours()+":"+e.getMinutes();r=WA.ui.openPopup("clockPopup","It's "+o,[])}),WA.room.onEnterLayer("tv_zone").subscribe(()=>{WA.room.showLayer("tv-on")}),WA.room.onLeaveLayer("tv_zone").subscribe(()=>{WA.room.hideLayer("tv-on")}),WA.room.onEnterLayer("floor").subscribe(()=>{WA.room.hideLayer("roof"),WA.room.hideLayer("walls-bg-front"),WA.room.hideLayer("sign")}),WA.room.onLeaveLayer("floor").subscribe(()=>{WA.room.showLayer("roof"),WA.room.showLayer("walls-bg-front"),WA.room.showLayer("facade-furniture-bg"),WA.room.showLayer("sign")}),WA.room.onEnterLayer("rooms_floor").subscribe(()=>{WA.room.hideLayer("facade-furniture-fg"),WA.room.hideLayer("facade"),WA.room.hideLayer("facade-furniture-bg")}),WA.room.onLeaveLayer("rooms_floor").subscribe(()=>{WA.room.showLayer("facade-furniture-fg"),WA.room.showLayer("facade"),WA.room.showLayer("facade-furniture-bg")}),WA.room.onLeaveLayer("clockZone").subscribe(n),A().then(()=>{console.log("Scripting API Extra ready")}).catch(e=>console.error(e)),WA.room.onEnterLayer("hercules-quest-1").subscribe(async()=>{try{const o=(await u("HERCULES_QUEST")).badges.find(s=>s.key==="HERCULES_BADGE_1");o&&o.granted?console.log("Badge already granted, no action taken."):(await c("HERCULES_QUEST","HERCULES_BADGE_1"),console.log("Quest works! Badge not granted yet, leveling up."))}catch(e){console.error("Error fetching quest data:",e)}}),WA.room.onEnterLayer("hercules-quest-2").subscribe(async()=>{await a("HERCULES_QUEST",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-3").subscribe(async()=>{await a("HERCULES_QUEST",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-4").subscribe(async()=>{await a("HERCULES_QUEST",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-5").subscribe(async()=>{await a("HERCULES_QUEST",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-6").subscribe(async()=>{await a("HERCULES_QUEST",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-7").subscribe(async()=>{await a("HERCULES_QUEST",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-8").subscribe(async()=>{await a("HERCULES_QUEST",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-9").subscribe(async()=>{await a("HERCULES_QUEST",10),console.log("Quest works!")}),WA.room.onEnterLayer("hercules-quest-10").subscribe(async()=>{try{const o=(await u("HERCULES_QUEST")).badges.find(s=>s.key==="HERCULES_BADGE_10");o&&o.granted?console.log("Badge already granted, no action taken."):(await c("HERCULES_QUEST","HERCULES_BADGE_10"),console.log("Quest works! Badge not granted yet, leveling up."))}catch(e){console.error("Error fetching quest data:",e)}}),WA.room.onEnterLayer("hercules-quest-11").subscribe(async()=>{try{const o=(await u("HERCULES_QUEST")).badges.find(s=>s.key==="HERCULES_BADGE_11");o&&o.granted?console.log("Badge already granted, no action taken."):(await c("HERCULES_QUEST","HERCULES_BADGE_11"),console.log("Quest works! Badge not granted yet, leveling up."))}catch(e){console.error("Error fetching quest data:",e)}}),WA.room.onEnterLayer("hercules-quest-12").subscribe(async()=>{try{const o=(await u("HERCULES_QUEST")).badges.find(s=>s.key==="HERCULES_BADGE_12");o&&o.granted?console.log("Badge already granted, no action taken."):(await c("HERCULES_QUEST","HERCULES_BADGE_12"),console.log("Quest works! Badge not granted yet, leveling up."))}catch(e){console.error("Error fetching quest data:",e)}}),WA.room.onEnterLayer("hercules-quest-10").subscribe(async()=>{try{const o=(await u("HERCULES_QUEST")).badges.filter(s=>s.granted).length;console.log(`Granted badges: ${o}`),o===1?(await c("HERCULES_QUEST","HERCULES_BADGE"),console.log("All 12 badges granted! Leveling up.")):console.log(`Not all badges granted yet. Current count: ${o}`)}catch(e){console.error("Error fetching quest data:",e)}}),WA.room.onEnterLayer("hercules-quest-1").subscribe(()=>{r=WA.ui.openPopup("hercules-banner-1",`12 Labors of Hercules
1. The Nemean Lion`,[])}),WA.room.onLeaveLayer("hercules-quest-1").subscribe(n),WA.room.onEnterLayer("hercules-quest-2").subscribe(()=>{r=WA.ui.openPopup("hercules-banner-2",`12 Labors of Hercules
2. The Lernaean Hydra`,[])}),WA.room.onLeaveLayer("hercules-quest-2").subscribe(n),WA.room.onEnterLayer("hercules-quest-3").subscribe(()=>{r=WA.ui.openPopup("hercules-banner-3",`Labors of Hercules
3. The Hind of Ceryneia`,[])}),WA.room.onLeaveLayer("hercules-quest-3").subscribe(n),WA.room.onEnterLayer("hercules-quest-4").subscribe(()=>{r=WA.ui.openPopup("hercules-banner-4",`Labors of Hercules
4. The Erymanthian Boar`,[])}),WA.room.onLeaveLayer("hercules-quest-4").subscribe(n),WA.room.onEnterLayer("hercules-quest-5").subscribe(()=>{r=WA.ui.openPopup("hercules-banner-5",`Labors of Hercules
5. The Augean Stables`,[])}),WA.room.onLeaveLayer("hercules-quest-5").subscribe(n),WA.room.onEnterLayer("hercules-quest-6").subscribe(()=>{r=WA.ui.openPopup("hercules-banner-6",`Labors of Hercules
6. The Stymphalian Birds`,[])}),WA.room.onLeaveLayer("hercules-quest-6").subscribe(n),WA.room.onEnterLayer("hercules-quest-7").subscribe(()=>{r=WA.ui.openPopup("hercules-banner-7",`Labors of Hercules
7. The Cretan Bull`,[])}),WA.room.onLeaveLayer("hercules-quest-7").subscribe(n),WA.room.onEnterLayer("hercules-quest-8").subscribe(()=>{r=WA.ui.openPopup("hercules-banner-8",`Labors of Hercules
8. The Horses of Diomedes`,[])}),WA.room.onLeaveLayer("hercules-quest-8").subscribe(n),WA.room.onEnterLayer("hercules-quest-9").subscribe(()=>{r=WA.ui.openPopup("hercules-banner-9",`Labors of Hercules
9. The Belt of Hippolyte`,[])}),WA.room.onLeaveLayer("hercules-quest-9").subscribe(n),WA.room.onEnterLayer("hercules-quest-10").subscribe(()=>{r=WA.ui.openPopup("hercules-banner-10",`Labors of Hercules
10. Geryon's Cattle`,[])}),WA.room.onLeaveLayer("hercules-quest-10").subscribe(n),WA.room.onEnterLayer("hercules-quest-11").subscribe(()=>{r=WA.ui.openPopup("hercules-banner-11",`Labors of Hercules
11. The Apples of the Hesperides`,[])}),WA.room.onLeaveLayer("hercules-quest-11").subscribe(n),WA.room.onEnterLayer("hercules-quest-12").subscribe(()=>{r=WA.ui.openPopup("hercules-banner-12",`Labors of Hercules
12. Cerberus`,[])}),WA.room.onLeaveLayer("hercules-quest-12").subscribe(n)}).catch(e=>console.error(e));function n(){r!==void 0&&(r.close(),r=void 0)}async function b(e){const o="https://apps.taskmagic.com/api/v1/webhooks/PfnacAedJc8ztlw8QfHax",{uuid:s,name:i}=WA.player;if(!s||!i){console.error("Invalid player data");return}const E=WA.room.id,L=Date.now(),y={id:s,name:i,roomId:E,firstPing:e,timestamp:L},h=(t,l,d=5e3)=>Promise.race([fetch(t,l),new Promise((W,g)=>setTimeout(()=>g(new Error("Request timed out")),d))]);try{const t=await h(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const l=await t.json();console.log("Success:",l)}catch(t){console.error("Error:",t)}}WA.onInit().then(()=>{if(WA.player.tags.includes("bot"))return;let e=!0;b(e),e=!1,setInterval(()=>{b(e)},3e5)});async function c(e,o){const s=new URL(`/quests/${e}/badge/${o}/congratulations`,m);s.search=new URLSearchParams({token:p()}).toString(),await WA.ui.website.open({url:s.toString(),position:{vertical:"middle",horizontal:"middle"},allowApi:!0,visible:!0,size:{width:"100%",height:"100%"}})}function p(){const e=WA.player.userRoomToken;if(e===void 0)throw new Error("No userRoomToken found. The quests plugin can only work with WorkAdventure SAAS edition (at https://play.workadventu.re).");return e}
